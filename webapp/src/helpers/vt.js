

var Veritrans = function () { function i(t) { var i = document.createElement("script"), r = !1; i.src = t; i.async = !0; i.onload = i.onreadystatechange = function () { r || this.readyState && this.readyState !== "loaded" && this.readyState !== "complete" || (r = !0, i.onload = i.onreadystatechange = null, i && i.parentNode && i.parentNode.removeChild(i)) }; n || (n = document.getElementsByTagName("head")[0]); n.appendChild(i) } function r(n, t, i) { i = encodeURIComponent; t = ""; n = n || {}; for (key in n) n.hasOwnProperty(key) && (t += i(key) + "=" + i(n[key]) + "&"); return t } function u(n) { try { delete t[n] } catch (i) { } t[n] = null } function f(n, f, o) { var s = "json" + ++e; return f = ((n || "").indexOf("?") === -1 ? "?" : "&") + r(f) + "callback=" + s, t[s] = function (n) { o(n); u(s) }, i(n + f), s } var e = 0, n, t = this; return { jsonp: f } }(); (function () { function u(n) { return n != null && n != "" && n.match(/^[0-9]{14,16}$/) } function f(n) { if (n == null || n == "" || n.length < 14) return ""; first2 = parseInt(n.substr(0, 2)); function v(a, s) { for (var i = 0; i < a.length; i++) { if (a[i] == s) { return true; } } return false; } return v([34, 37], first2) && n.length == 15 ? "AMEX" : v([30, 36, 38, 39], first2) && n.length == 14 ? "DINERS" : v([35], first2) && n.length == 16 ? "JCB" : v([40, 41, 42, 43, 44, 45, 46, 47, 48, 49], first2) && n.length == 16 ? "VISA" : v([22, 23, 24, 25, 26, 27, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59], first2) && n.length == 16 ? "MASTER" : "" } function e(n, t, i, r, u, e) { if (f(n) == "") return !1; for (t = n.length, e = i = 0; t--;)r = +n[t], e += ++i % 2 ? r : (u = r * 2) > 9 ? u - 9 : u; return !(e % 10) } function o(n, t) { return +n < 1 ? !1 : +n > 12 ? !1 : (dt = new Date, dt.setMonth(dt.getMonth() - 3), ym = +(dt.getFullYear() + "" + ("00" + dt.getMonth()).slice(-2)), +(t + n) > ym) } function i() { n.error = null; n.loadState = 0 } var r, n = function () { }, s = Veritrans.jsonp, t = { code: "", message: "", status: "failure" }; return i(), n.timeout = 4e3, n.version = "1.1.0", n.tokenGet = function (f, h, c) { function l(i, r) { n.error = t; t.code = i; t.message = r; typeof c == "function" && c(n.error) } function a() { n.loadState == 0 && l("Q099", "[Failed to get token]") } if (i(), f = f(), n.client_key) if (u(f.card_number)) if (e(f.card_number)) if (f.card_exp_month) if (f.card_exp_year) if (o(f.card_exp_month, f.card_exp_year)) if (f.card_cvv && f.card_cvv.match(/^[0-9]{3,4}$/)) if (f.card_cvv.length < 3) l("Q001", "セキュリティコードが正しくありません"); else if (f.card_cvv.length > 4) l("Q001", "セキュリティコードが正しくありません"); else { f.client_key = n.client_key; r = setTimeout(a, n.timeout); function v(t) { n.loadState = 1; clearTimeout(r); t && t.code === "Q000" ? typeof h == "function" && h(t) : (n.error = t, typeof c == "function" && c(t)) } s("https://air.veritrans.co.jp/vtdirect/v1/tokens", f, v) } else l("Q001", "セキュリティコードを入力してください"); else l("Q001", "カード有効期限が正しくありません"); else l("Q001", "カード有効期限(年)が正しくありません"); else l("Q001", "カード有効期限(月)が正しくありません"); else l("Q001", "カード番号が正しくありません"); else l("Q001", "カード番号を入力してください"); else l("Q002", "[Client key required]") }, Veritrans = n }).call(this)

export default Veritrans;
